<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="titolario" >
  <resultMap id="abatorgenerated_TitolarioResult" class="it.tlogic.aoo.model.Titolario" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Mar 21 17:27:12 CET 2012.
    -->
    <result column="ID" property="id" jdbcType="BIGINT" />
    <result column="NAME" property="name" jdbcType="VARCHAR" />
    <result column="DESCR" property="descr" jdbcType="VARCHAR" />
     
    <result property="titolarioTree" column="ID" select="titolario_tree.selectByTitolario"/>
    
  </resultMap>
  
  <select id="selectByAooID" resultMap="abatorgenerated_TitolarioResult"  >
	<![CDATA[
    select TITOLARIO.ID, TITOLARIO.NAME, TITOLARIO.DESCR
    from 
	    TITOLARIO, COUNTER_HAS_AOO
	where 
	    TITOLARIO.ID = COUNTER_HAS_AOO.ID_TITOLARIO
	    AND COUNTER_HAS_AOO.AOO_ID = #value:BIGINT#
	    AND COUNTER_HAS_AOO.DT_INI_VAL <= SYSDATE() AND COUNTER_HAS_AOO.DT_END_VAL > SYSDATE()
	]]>
  </select>
  
  <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_TitolarioResult" parameterClass="it.tlogic.aoo.model.Titolario" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Mar 21 17:27:12 CET 2012.
    -->
    select ID, NAME, DESCR
    from TITOLARIO
    where ID = #id:BIGINT#
  </select>
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="it.tlogic.aoo.model.Titolario" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Mar 21 17:27:12 CET 2012.
    -->
    delete from TITOLARIO
    where ID = #id:BIGINT#
  </delete>
  <insert id="abatorgenerated_insert" parameterClass="it.tlogic.aoo.model.Titolario" >
    
    insert into TITOLARIO (NAME, DESCR)
    values (#name:VARCHAR#, #descr:VARCHAR#)
    <selectKey keyProperty="id" resultClass="long">  
            SELECT LAST_INSERT_ID() AS ID  
      </selectKey>  
  </insert>
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="it.tlogic.aoo.model.Titolario" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Mar 21 17:27:12 CET 2012.
    -->
    update TITOLARIO
    set NAME = #name:VARCHAR#,
      DESCR = #descr:VARCHAR#
    where ID = #id:BIGINT#
  </update>
  <update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="it.tlogic.aoo.model.Titolario" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Mar 21 17:27:12 CET 2012.
    -->
    update TITOLARIO
    <dynamic prepend="set" >
      <isNotNull prepend="," property="name" >
        NAME = #name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="descr" >
        DESCR = #descr:VARCHAR#
      </isNotNull>
    </dynamic>
    where ID = #id:BIGINT#
  </update>
</sqlMap>