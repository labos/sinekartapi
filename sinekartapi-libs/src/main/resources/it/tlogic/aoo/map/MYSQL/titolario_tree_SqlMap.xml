<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="titolario_tree" >
  <resultMap id="abatorgenerated_TitolarioTreeResult" class="it.tlogic.aoo.model.TitolarioTree" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Mar 22 14:59:42 CET 2012.
    -->
    <result column="ID" property="id" jdbcType="BIGINT" />
    <result column="TITOLARIO_ID" property="titolarioId" jdbcType="BIGINT" />
    <result column="ID_OWNER" property="idOwner" jdbcType="BIGINT" />
    <result column="NAME" property="name" jdbcType="VARCHAR" />
    <result column="DESCR" property="descr" jdbcType="VARCHAR" />
    
    <result property="child" column="ID" select="titolario_tree.getChilds" />
    
  </resultMap>
  
  
   <select id="selectByTitolario" resultMap="abatorgenerated_TitolarioTreeResult"  >
   
    select ID, TITOLARIO_ID, ID_OWNER, NAME, DESCR
    from TITOLARIO_TREE
    where TITOLARIO_ID = #value:BIGINT#
    	AND ID_OWNER IS NULL
    ORDER BY ID
  </select>
  
  <select id="getChilds" resultMap="abatorgenerated_TitolarioTreeResult"  >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Mar 22 14:59:42 CET 2012.
    -->
    select ID, TITOLARIO_ID, ID_OWNER, NAME, DESCR
    from TITOLARIO_TREE
    where ID_OWNER = #value:BIGINT#
  </select>
  
  <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_TitolarioTreeResult" parameterClass="it.tlogic.aoo.model.TitolarioTree" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Mar 22 14:59:42 CET 2012.
    -->
    select ID, TITOLARIO_ID, ID_OWNER, NAME, DESCR
    from TITOLARIO_TREE
    where ID = #id:BIGINT#
  </select>
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="it.tlogic.aoo.model.TitolarioTree" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Mar 22 14:59:42 CET 2012.
    -->
    delete from TITOLARIO_TREE
    where ID = #id:BIGINT#
  </delete>
  <insert id="abatorgenerated_insert" parameterClass="it.tlogic.aoo.model.TitolarioTree" >
    insert into TITOLARIO_TREE (TITOLARIO_ID, ID_OWNER, NAME, DESCR)
    values (#titolarioId:BIGINT#, #idOwner:BIGINT#, #name:VARCHAR#, #descr:VARCHAR#)
     <selectKey keyProperty="id" resultClass="long">  
            SELECT LAST_INSERT_ID() AS ID  
      </selectKey>  
  </insert>
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="it.tlogic.aoo.model.TitolarioTree" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Mar 22 14:59:42 CET 2012.
    -->
    update TITOLARIO_TREE
    set TITOLARIO_ID = #titolarioId:BIGINT#,
      ID_OWNER = #idOwner:BIGINT#,
      NAME = #name:VARCHAR#,
      DESCR = #descr:VARCHAR#
    where ID = #id:BIGINT#
  </update>

</sqlMap>