<alfresco-config>

	<config evaluator="model-type" condition="cm:content" replace="true">

		<forms>
	 <dependencies>
         <css src="/org/alfresco/components/form/custom-label-layout.css" />
      </dependencies>
			<!-- Search form -->
			<form id="search">
			<create-form template="/org/alfresco/components/form/2-column-protocollo-set.ftl" />
				<field-visibility>
					<show id="skpi:mittente" force="true" />
					<show id="skpi:destinatario" force="true" />
					<show id="skpi:oggetto" force="true" />
					<show id="skpi:data_protocollazione" force="true" />
					 <show id="skpi:tipo" force="true"/>
					<show id="skpi:numero_protocollo" force="true" />
					<show id="skpi:titolario" force="true" />
				</field-visibility>

				<appearance>
					<field id="cm:content">
						<control template="/org/alfresco/components/form/controls/hidden.ftl">
						</control>
					</field>

					<field id="skpi:titolario">
						<control
							template="/org/alfresco/components/form/controls/titolarioTree.ftl">
						</control>
					</field>
					   <field id="skpi:data_protocollazione">
      					<control template="/org/alfresco/components/form/controls/daterange.ftl" />
  						 </field>
  						<field id="skpi:numero_protocollo">
      						<control>
         						<control-param name="forceEditable">true</control-param>
      						</control>
  						 </field>

				</appearance>
			</form>

		</forms>

	</config>

	<config evaluator="model-type" condition="skpi:protocollo" replace="true">
		<forms>
			<!-- Edit form -->
			<form>
<!--  				<create-form template="/org/alfresco/components/form/protocollo-create-form.ftl" /> -->
<!--   				<create-form template="/org/alfresco/components/form/2-column-set.ftl" /> -->

				<field-visibility>
					<show id="cm:content" />

					<show id="my-upload" />
					<show id="skpi:titolario" />
					<show id="skpi:mittente" />
					<show id="skpi:destinatario" />
					<show id="skpi:oggetto" />
					<show id="skpi:aoo" />
					<show id="skpi:tipo" />
					<show id="skpi:city" />
					<show id="skpi:address" />
					<show id="skpi:postalCode" />
					<show id="skpi:province" />
					<show id="skpi:source" />
					<show id="skpi:arrival_date" />
					<show id="skpi:arrival_hour" />
					<show id="skpi:protocollo_precedente" />
					<show id="skpi:data_protocollo_precedente" />
					<show id="skpi:protocollo_mittente" />
					<show id="skpi:data_protocollo_mittente" />
					<show id="skpi:protocollo_emergenza" />
					<show id="skpi:data_protocollo_emergenza" />
					<show id="skpi:fascicolo" />
					<show id="skpi:note" />

				</field-visibility>
				<appearance>
				
					<!-- Dati Obbligatori -->
					<set id="mandatory" label="Dati Obbligatori" appearance=""
						template="/org/alfresco/components/form/2-column-protocollo-set.ftl" />
						
					<set id="optional" label="Dati Opzionali" 
						template="/org/alfresco/components/form/2-column-protocollo-set.ftl" />
						
					<field id="cm:content">
						<control template="/org/alfresco/components/form/controls/hidden.ftl">
						</control>
					</field>
						<field id="my-upload" set="mandatory" >
						<control template="/org/alfresco/components/form/controls/uploadFileProtocol.ftl">
						</control>
               		 </field>
					
					<field id="skpi:aoo" set="mandatory">
						<control template="/org/alfresco/components/form/controls/selectone.ftl">
							<control-param name="options">SR-AOO</control-param>
							
						</control>
					</field>

					<field id="skpi:titolario" set="mandatory">
						<control template="/org/alfresco/components/form/controls/titolarioTree.ftl">
						</control>
					</field>

					<field id="skpi:mittente" set="mandatory" mandatory="true">
						<control template="/org/alfresco/components/form/controls/textarea.ftl" /> 
 				 <constraint-handlers>
                 <constraint type="MANDATORY" validation-handler="Alfresco.forms.validation.validateMandatory" event="keyup" />
              </constraint-handlers>
					</field>

					<field id="skpi:destinatario" set="mandatory" mandatory="true">
						<control template="/org/alfresco/components/form/controls/textarea.ftl" /> 
					</field>
					<field id="skpi:fascicolo" label="Fascicolo/Dossier" />

					<field id="skpi:oggetto" set="mandatory" mandatory="true" >
						<control template="/org/alfresco/components/form/controls/textarea.ftl" /> 
				    </field>
					<field id="skpi:tipo" set="mandatory" />
					
					<!-- Dati opzionali -->
					<field id="skpi:address" set="optional" label-id="label.address">
						<control
							template="/org/alfresco/components/form/controls/addressPostalCode.ftl">
						</control>
					</field>
					<field id="skpi:city" set="optional" label-id="label.city" />
					<field id="skpi:postalCode" set="optional" label-id="label.postalCode" />
					<field id="skpi:province" set="optional" label-id="label.province" />
					<field id="skpi:source" set="optional"  label-id="label.source"/>
					<field id="skpi:arrival_date" set="optional" label-id="label.arrival_date"/>
					<field id="skpi:arrival_hour" set="optional" label-id="label.arrival_hour">
						<control template="/org/alfresco/components/form/controls/hour.ftl">
						</control>
					</field>
					<field id="skpi:protocollo_precedente" set="optional" />
					<field id="skpi:data_protocollo_precedente" set="optional" />
					<field id="skpi:protocollo_mittente" set="optional" />
					<field id="skpi:data_protocollo_mittente" set="optional" />
					<field id="skpi:protocollo_emergenza" set="optional" />
					<field id="skpi:data_protocollo_emergenza" set="optional" />
					<field id="skpi:fascicolo" set="optional" />
					<field id="skpi:note" set="optional" />
				</appearance>
			</form>

		</forms>
	</config>

</alfresco-config>
