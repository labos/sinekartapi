<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>

<beans>

	<!-- Override WebScript Messages - add slingshot application messages -->
	<bean id="skpi.custom.resources"
		class="org.springframework.extensions.surf.util.ResourceBundleBootstrapComponent">
		<property name="resourceBundles">
			<list>
				<value>alfresco.messages.sinekartapi</value>
			</list>
		</property>
	</bean>

	<bean id="skpi.custom.config" class="org.springframework.extensions.config.ConfigBootstrap"
		init-method="register">
		<property name="configService" ref="web.config" />
		<property name="configs">
			<list>
				<value>classpath:alfresco/web-extension/skpi/sinekartapi-share-config.xml</value>
				<value>classpath:alfresco/web-extension/skpi/sinekartapi-form-modeltype-config.xml</value>
				<value>classpath:alfresco/web-extension/skpi/sinekartapi-form-nodetype-config.xml</value>
			</list>
		</property>
	</bean>

	<!-- Attenzione che NON sia specificato #export JAVA_OPTS="-Duser.language=it 
		-Duser.region=IT" -->

	<!-- <bean id="localeResolver" class="org.springframework.web.servlet.i18n.FixedLocaleResolver"> 
		<property name="defaultLocale" value="en_US"/> </bean> -->


	<bean id="evaluator.doclib.action.protocollabile" class="org.alfresco.web.evaluator.HasAspectEvaluator">
		<property name="aspects">
			<list>
				<value>skpi:protocollabile</value>
			</list>
		</property>
	</bean>

	<bean id="evaluator.doclib.action.protocolloAnnullabile" class="org.alfresco.web.evaluator.HasAspectEvaluator">
		<property name="aspects">
			<list>
				<value>skpi:annullato</value>
			</list>
		</property>
	</bean>
	<bean id="evaluator.doclib.action.notEmbargo" class="org.alfresco.web.evaluator.ValueEvaluator">
		<property name="accessor" value="node.properties.skpi:doc_hidden" />
     	 <property name="comparator">
         <bean class="org.alfresco.web.evaluator.StringEqualsComparator">
            <property name="value" value="false" />
         </bean>
      	</property>
	</bean>

	<bean id="evaluator.doclib.action.isCreator" class="org.alfresco.web.evaluator.ValueEvaluator">
		<property name="accessor" value="node.properties.cm:creator" />
     	 <property name="comparator">
         <bean class="org.alfresco.web.evaluator.StringEqualsComparator">
            <property name="value" value="admin" />
         </bean>
      </property>
	</bean>	
	
<!--  beans for multiple evaluations -->
<bean id="evaluator.doclib.action.isProtocolAndNulled" parent="evaluator.doclib.action.chainedMatchAll">
  <property name="evaluators">
    <list>
      <ref bean="evaluator.doclib.action.protocollabile" />
      <ref bean="evaluator.doclib.action.protocolloAnnullabile" />
    </list>
  </property>
</bean>

<bean id="evaluator.doclib.action.isProtocolAndNotEmbargo" parent="evaluator.doclib.action.chainedMatchAll">
  <property name="evaluators">
    <list>
      <ref bean="evaluator.doclib.action.protocollabile" />
      <ref bean="evaluator.doclib.action.notEmbargo" />
    </list>
  </property>
</bean>
</beans>
